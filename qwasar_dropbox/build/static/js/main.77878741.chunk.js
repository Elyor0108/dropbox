(this.webpackJsonpmy_dropbox=this.webpackJsonpmy_dropbox||[]).push([[0],{65:function(e,t,a){e.exports=a(84)},84:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(18),c=a.n(l),o=a(14),i=a.n(o),s=a(22),u=a(6),m=a(88);function d(e){var t=e.children;return n.a.createElement(m.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh",color:"#FFD700"}},n.a.createElement("div",{className:"w-100",style:{maxWidth:"400px"}},t))}var p=a(11),f=a(40),b=a.n(f),E=(a(71),a(73),a(85),Object(f.initializeApp)({apiKey:"AIzaSyC1lSFzufuynOouqyd-jdymqC-wroq-uwg",authDomain:"drop-box-f22cf.firebaseapp.com",databaseURL:"https://drop-box-f22cf-default-rtdb.firebaseio.com",projectId:"drop-box-f22cf",storageBucket:"drop-box-f22cf.appspot.com",messagingSenderId:"1057069702337",appId:"1:1057069702337:web:4d1398fac0c2fb5562c840"})),h=E.firestore(),g={files:h.collection("files"),folders:h.collection("folders"),formatDoc:function(e){return Object(p.a)({id:e.id},e.data())},getCurrentTimestamp:b.a.firestore.FieldValue.serverTimestamp},y=E.auth(),v=E.storage(),x=n.a.createContext();function j(){return Object(r.useContext)(x)}function w(e){var t=e.children,a=Object(r.useState)(),l=Object(u.a)(a,2),c=l[0],o=l[1],i=Object(r.useState)(!0),s=Object(u.a)(i,2),m=s[0],d=s[1];Object(r.useEffect)((function(){return y.onAuthStateChanged((function(e){o(e),d(!1)}))}),[]);var p={currentUser:c,login:function(e,t){return y.signInWithEmailAndPassword(e,t)},signup:function(e,t){return y.createUserWithEmailAndPassword(e,t)},updateEmail:function(e){return c.updateEmail(e)},logout:function(){return y.signOut()},resetPassword:function(e){return y.sendPasswordResetEmail(e)},updatePassword:function(e){return c.updatePassword(e)}};return n.a.createElement(x.Provider,{value:p},!m&&t)}var O=a(8),F=a(7),C=a(95),k=a(89),N=a(92),I=a(90);function D(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=j().login,l=Object(r.useState)(""),c=Object(u.a)(l,2),o=c[0],m=c[1],p=Object(r.useState)(!1),f=Object(u.a)(p,2),b=f[0],E=f[1],h=Object(O.g)();function g(){return(g=Object(s.a)(i.a.mark((function r(n){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),r.prev=1,m(""),E(!0),r.next=6,a(e.current.value,t.current.value);case 6:h.push("/"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),m("Failed to log in");case 12:E(!1);case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))).apply(this,arguments)}var y=n.a.createElement("img",{src:"firebase-auth.png",style:{justifyContent:"center",alignItems:"center",height:"90px",width:"90px"}});return n.a.createElement(d,null,n.a.createElement(C.a,null,n.a.createElement(C.a.Body,null,y,n.a.createElement("h2",{className:"text-center mb-4"},"Log In"),o&&n.a.createElement(k.a,{variant:"danger"},o),n.a.createElement(N.a,{onSubmit:function(e){return g.apply(this,arguments)}},n.a.createElement(N.a.Group,{id:"email"},n.a.createElement(n.a.Fragment,null,"Email"),n.a.createElement(N.a.Control,{type:"email",ref:e,required:!0})),n.a.createElement(N.a.Group,{id:"password"},n.a.createElement(n.a.Fragment,null,"Password"),n.a.createElement(N.a.Control,{type:"password",ref:t,required:!0})),n.a.createElement(I.a,{disabled:b,className:"w-100",type:"submit",style:{background:"#DAA520",borderColor:"yellow"}},"Log In")),n.a.createElement("div",{className:"w-100 text-center mt-3"},n.a.createElement(F.b,{to:"/forgot-password",style:{color:"#DAA520"}},"Forgot Password?"))),n.a.createElement("div",{className:"text-center mb-3"},"Need an account? ",n.a.createElement(F.b,{to:"/signup",style:{color:"#DAA520"}},"Sign Up"))))}function S(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=j().signup,l=Object(r.useState)(""),c=Object(u.a)(l,2),o=c[0],m=c[1],p=Object(r.useState)(!1),f=Object(u.a)(p,2),b=f[0],E=f[1],h=Object(O.g)(),g=Object(r.useRef)(),y=n.a.createElement("img",{src:"firebase-auth.png",style:{justifyContent:"center",alignItems:"center",height:"90px",width:"90px"}});function v(){return(v=Object(s.a)(i.a.mark((function r(n){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),r.prev=1,m(""),E(!0),r.next=6,a(g.current.value,e.current.value);case 6:h.push("/"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),m("Failed create User");case 12:if(E(!1),e.current.value===t.current.value){r.next=15;break}return r.abrupt("return",m("Passwords 404 error"));case 15:case"end":return r.stop()}}),r,null,[[1,9]])})))).apply(this,arguments)}return n.a.createElement(d,null,n.a.createElement(C.a,null,n.a.createElement(C.a.Body,null,y,n.a.createElement("h2",{className:"text-center mb-4"},"Sign Up"),o&&n.a.createElement(k.a,{variant:"danger"},o),n.a.createElement(N.a,{onSubmit:function(e){return v.apply(this,arguments)}},n.a.createElement(N.a.Group,{id:"email"},n.a.createElement(n.a.Fragment,null,"Email"),n.a.createElement(N.a.Control,{type:"email",ref:g,required:!0})),n.a.createElement(N.a.Group,{id:"password"},n.a.createElement(n.a.Fragment,null,"Password"),n.a.createElement(N.a.Control,{type:"password",ref:e,required:!0})),n.a.createElement(N.a.Group,{id:"password-confirm"},n.a.createElement(n.a.Fragment,null,"Password Confirm"),n.a.createElement(N.a.Control,{type:"password",ref:t,required:!0})),n.a.createElement(I.a,{disabled:b,className:"w-100",style:{background:"#DAA520",borderColor:"yellow"},type:"submit"},"Sign Up")))),n.a.createElement("div",{className:"w-100 #FFD700 text-center mt-2"},"Already have an account? ",n.a.createElement(F.b,{to:"/login"},n.a.createElement("h6",{className:"#FFD700",style:{fontSize:"16px",color:"#DAA520"}},"||-- Log In"))))}function A(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),a=t[0],l=t[1],c=j(),o=c.currentUser,m=c.logout,p=Object(O.g)();function f(){return(f=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(""),e.prev=1,e.next=4,m();case 4:p.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),l("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return n.a.createElement(d,null,n.a.createElement(C.a,null,n.a.createElement(C.a.Body,null,n.a.createElement("h2",{className:"text-center mb-4"},"Profile"),a&&n.a.createElement(k.a,{variant:"danger"},a),n.a.createElement("strong",null,"Email:")," ",o.email,n.a.createElement(F.b,{to:"/update-profile",className:"btn w-100 mt-3",style:{background:"#FFD700"}},"Update Profile"))),n.a.createElement("div",{className:"w-150 text-center mt-2"},n.a.createElement(I.a,{variant:"link",style:{backgroundColor:"#FFD700",color:"black"},onClick:function(){return f.apply(this,arguments)}},"Log Out")))}var P={name:"Root",id:null,path:[]},R="select-folder",U="update-folder",B="set-child-files",L="set-child-folders";function q(e,t){var a=t.type,r=t.payload;switch(a){case R:return{folderId:r.folderId,folder:r.folder,childFiles:[],childFolders:[]};case L:return Object(p.a)(Object(p.a)({},e),{},{childFolders:r.childFolders});case U:return Object(p.a)(Object(p.a)({},e),{},{folder:r.folder});case B:return Object(p.a)(Object(p.a)({},e),{},{childFiles:r.childFiles});default:return e}}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Object(r.useReducer)(q,{folderId:e,folder:t,childFolders:[],childFiles:[]}),n=Object(u.a)(a,2),l=n[0],c=n[1],o=j(),i=o.currentUser;return Object(r.useEffect)((function(){c({type:R,payload:{folderId:e,folder:t}})}),[e,t]),Object(r.useEffect)((function(){if(null==e)return c({type:U,payload:{folder:P}});g.folders.doc(e).get().then((function(e){c({type:U,payload:{folder:g.formatDoc(e)}})})).catch((function(){c({type:U,payload:{folder:P}})}))}),[e]),Object(r.useEffect)((function(){return g.folders.where("parentId","==",e).orderBy("createdAt").where("userId","==",i.uid).onSnapshot((function(e){c({type:L,payload:{childFolders:e.docs.map(g.formatDoc)}})}))}),[e,i]),Object(r.useEffect)((function(){return g.files.where("folderId","==",e).where("userId","==",i.uid).orderBy("createdAt").onSnapshot((function(e){c({type:B,payload:{childFiles:e.docs.map(g.formatDoc)}})}))}),[e,i]),l}var T=a(25),W=a(24);function _(e){var t=e.file,a=n.a.createElement(W.a,{icon:T.a,className:"mr-2"});return n.a.createElement("a",{href:t.url,target:"_blank",className:"btn btn-outline-dark text-truncate"},a,t.name)}var z=a(93),H=a(30),M=a(91);function J(e){var t=e.currentFolder,a=Object(r.useState)(!1),l=Object(u.a)(a,2),c=l[0],o=l[1],i=Object(r.useState)(""),s=Object(u.a)(i,2),m=s[0],d=s[1],p=j().currentUser;function f(){o(!1)}return n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{onClick:function(){o(!0)},style:{borderColor:"#1E90FF",backgroundColor:"white",height:"50px",width:"50px",borderRadius:"100px"}},n.a.createElement(W.a,{icon:T.d,style:{height:"18px",width:"18px",color:"#1E90FF"}})),n.a.createElement(M.a,{show:c,onHide:f},n.a.createElement(N.a,{onSubmit:function(e){if(e.preventDefault(),null!=t){var a=Object(H.a)(t.path);t!==P&&a.push({name:t.name,id:t.id}),g.folders.add({name:m,parentId:t.id,userId:p.uid,path:a,createdAt:g.getCurrentTimestamp()}),f(),d("")}}},n.a.createElement(M.a.Body,null,n.a.createElement("div",null,n.a.createElement("h4",null,"Enter Folder Name"),n.a.createElement(N.a.Control,{type:"text",required:!0,value:m,onChange:function(e){return d(e.target.value)}}))),n.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"15px",marginTop:"15px"}},n.a.createElement("button",{onClick:f,variant:"secondary",style:{width:"120px",borderColor:"#1E90FF",borderRadius:"30px",color:"#1E90FF",marginRight:"8px",backgroundColor:"#D3D3D3"}},"Close"),n.a.createElement("button",{type:"submit",style:{width:"120px",borderColor:"#1E90FF",borderRadius:"30px",color:"white",backgroundColor:"#1E90FF"}},"Add Folder")))))}var V=a(94);var K=function(e){var t=e.currentFolder,a=Object(r.useState)([]),l=Object(u.a)(a,2),o=l[0],i=l[1],s=j().currentUser;return n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{style:{marginRight:"10px",backgroundColor:"white",borderColor:"#1E90FF",width:"50px",height:"50px",borderRadius:"100px"}},n.a.createElement("label",{className:"btn",style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"5px",marginLeft:"2px"}},n.a.createElement(W.a,{icon:T.b,style:{width:"18px",height:"18px",color:"#1E90FF"}}),n.a.createElement("input",{type:"file",onChange:function(e){var a=e.target.files[0];if(null!=t&&null!=a){var r=Object(V.a)();i((function(e){return[].concat(Object(H.a)(e),[{id:r,name:a.name,progress:0,error:!1}])}));var n=t===P?"".concat(t.path.join("/"),"/").concat(a.name):"".concat(t.path.join("/"),"/").concat(t.name,"/").concat(a.name),l=v.ref("/files/".concat(s.uid,"/").concat(n)).put(a);l.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes;i((function(e){return e.map((function(e){return e.id===r?Object(p.a)(Object(p.a)({},e),{},{progress:t}):e}))}))}),(function(){i((function(e){return e.filter((function(e){return e.id!==r}))})),l.snapshot.ref.getDownloadURL().then((function(e){g.files.where("name","==",a.name).where("userId","==",s.uid).where("folderId","==",t.id).get().then((function(r){var n=r.docs[0];n?n.ref.update({url:e}):g.files.add({url:e,name:a.name,createdAt:g.getCurrentTimestamp(),folderId:t.id,userId:s.uid})}))}))}),(function(){i((function(e){return e.map((function(e){return e.id===r?Object(p.a)(Object(p.a)({},e),{},{error:!0}):e}))}))}))}},style:{display:"flex",justifyContent:"center",alignItems:"center",opacity:0,position:"absolute",left:"-9999px"}}))),o.length>0&&c.a.createPortal(n.a.createElement("div",{style:{position:"absolute",bottom:"1rem",right:"1rem",maxWidth:"250px"}},o.map((function(e){return n.a.createElement("div",{key:e.id,onClose:function(){i((function(t){return t.filter((function(t){return t.id!==e.id}))}))}},n.a.createElement("div",{closeButton:e.error,className:"text-truncate w-100 d-block"},e.name),n.a.createElement("div",null,n.a.createElement("div",{animated:!e.error,variant:e.error?"danger":"primary",now:e.error?100:100*e.progress,label:e.error?"Error":"".concat(Math.round(100*e.progress),"%")})))}))),document.body))};function Q(){var e=Object(O.i)().folderId,t=Object(O.h)().state,a=G(e,(void 0===t?{}:t).folder).folder,r=n.a.createElement(J,{currentFolder:a}),l=n.a.createElement(K,{currentFolder:a});return n.a.createElement(z.a,{bg:"light",expand:"sm"},n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{src:"dropbox_logo.png",style:{width:"50px",height:"50px",marginTop:"4px",marginLeft:"5px"}}),n.a.createElement(z.a,{as:F.b,to:"/",style:{marginRight:"150px",marginLeft:"50px"}},n.a.createElement("h1",{style:{color:"#1E90FF",textDecoration:"underline"}},"HOME")),n.a.createElement(z.a,{as:F.b,to:"/user"},n.a.createElement("h1",{style:{color:"#1E90FF",marginRight:"100px",textDecoration:"underline"}},"Profile"))),n.a.createElement("div",{className:"d-flex align-items-center media_que",style:{}},l,r))}function X(e){var t=e.folder;return n.a.createElement(I.a,{to:{pathname:"/folder/".concat(t.id),state:{folder:t}},as:F.b,variant:"outline-info",className:"btn btn-outline-info text-truncate w-200"},n.a.createElement(W.a,{className:"mr-2",icon:T.c}),t.name)}var Y=a(96);function Z(e){var t=e.currentFolder,a=t===P?[]:[P];return t&&(a=[].concat(Object(H.a)(a),Object(H.a)(t.path))),n.a.createElement(Y.a,{className:"flex-grow-1",listProps:{className:"bg-white pl-0 m-0"}},a.map((function(e,t){return n.a.createElement(Y.a.Item,{key:e.id,linkAs:F.b,linkProps:{to:{pathname:e.id?"/folder/".concat(e.id):"/",state:{folder:Object(p.a)(Object(p.a)({},e),{},{path:a.slice(1,t)})}}},className:"text-truncate d-inline-block",style:{maxWidth:"150px"}},e.name)})),t&&n.a.createElement(Y.a.Item,{className:"text-truncate d-inline-block",style:{maxWidth:"200px"},active:!0},t.name))}var $=function(){var e=Object(O.i)().folderId,t=Object(O.h)().state,a=G(e,(void 0===t?{}:t).folder),r=(a.folder,a.childFolders),l=a.childFiles;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Q,null),n.a.createElement("container",{fluid:!0},n.a.createElement(Z,{style:{marginLeft:"100px"}}),r.length>0&&n.a.createElement("div",{className:"d-flex flex-wrap"},r.map((function(e){return n.a.createElement("div",{key:e.id,style:{maxWidth:"250px"},className:"p-2"},n.a.createElement(X,{folder:e}))}))),l.length>0&&r.length>0&&n.a.createElement("hr",null),l.length>0&&n.a.createElement("div",{className:"d-flex flex-wrap"},l.map((function(e){return n.a.createElement("div",{key:e.id,style:{maxWidth:"250px"},className:"p-2"},n.a.createElement(_,{file:e}))})))))},ee=a(64);function te(e){var t=e.component,a=Object(ee.a)(e,["component"]),r=j().currentUser;return n.a.createElement(O.b,Object.assign({},a,{render:function(e){return r?n.a.createElement(t,e):n.a.createElement(O.a,{to:"/login"})}}))}function ae(){var e=Object(r.useRef)(),t=Object(r.useState)(""),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(r.useState)(!1),m=Object(u.a)(o,2),p=m[0],f=m[1],b=Object(r.useState)(""),E=Object(u.a)(b,2),h=E[0],g=E[1],y=j().resetPassword;function v(){return(v=Object(s.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,g(""),c(""),f(!0),t.next=7,y(e.current.value);case 7:g("Check your email"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),c("Reset password -Failed-");case 13:f(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}var x=n.a.createElement("img",{src:"firebase-auth.png",style:{justifyContent:"center",alignItems:"center",height:"90px",width:"90px"}});return n.a.createElement(d,null,n.a.createElement(C.a,null,n.a.createElement(C.a.Body,null,x,n.a.createElement("h2",{className:"text-center mb-4"},"Password Reset"),l&&n.a.createElement(k.a,{variant:"danger"},l),h&&n.a.createElement(k.a,{variant:"success"},h),n.a.createElement(N.a,{onSubmit:function(e){return v.apply(this,arguments)}},n.a.createElement(N.a.Group,{id:"email"},n.a.createElement(n.a.Fragment,null,"Email"),n.a.createElement(N.a.Control,{type:"email",ref:e,required:!0})),n.a.createElement(I.a,{disabled:p,className:"w-100",type:"submit",style:{background:"#DAA520",borderColor:"yellow"}},"Reset Password")),n.a.createElement("div",{className:"w-100 text-center mt-3"},n.a.createElement(F.b,{to:"/login",style:{color:"#DAA520"}},"Login")))),n.a.createElement("div",{className:"w-100 text-center mt-2"},"Need an account? ",n.a.createElement(F.b,{to:"/signup",style:{color:"#DAA520"}},"Sign Up")))}function re(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=Object(r.useRef)(),l=j(),c=l.currentUser,o=l.updatePassword,i=l.updateEmail,s=Object(r.useState)(""),m=Object(u.a)(s,2),p=m[0],f=m[1],b=Object(r.useState)(!1),E=Object(u.a)(b,2),h=E[0],g=E[1],y=Object(O.g)();var v=n.a.createElement("img",{src:"firebase-auth.png",style:{justifyContent:"center",alignItems:"center",height:"90px",width:"90px"}});return n.a.createElement(d,null,n.a.createElement(C.a,null,n.a.createElement(C.a.Body,null,v,n.a.createElement("h2",{className:"text-center mb-4"},"Update Profile"),p&&n.a.createElement(k.a,{variant:"danger"},p),n.a.createElement(N.a,{onSubmit:function(r){if(r.preventDefault(),t.current.value!==a.current.value)return f("Passwords do not match");var n=[];g(!0),f(""),e.current.value!==c.email&&n.push(i(e.current.value)),t.current.value&&n.push(o(t.current.value)),Promise.all(n).then((function(){y.push("/user")})).catch((function(){f("Failed to update account")})).finally((function(){g(!1)}))}},n.a.createElement(N.a.Group,{id:"email"},n.a.createElement(n.a.Fragment,null,"Email"),n.a.createElement(N.a.Control,{type:"email",ref:e,required:!0,defaultValue:c.email})),n.a.createElement(N.a.Group,{id:"password"},n.a.createElement(n.a.Fragment,null,"Password"),n.a.createElement(N.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same"})),n.a.createElement(N.a.Group,{id:"password-confirm"},n.a.createElement(n.a.Fragment,null,"Password Confirm"),n.a.createElement(N.a.Control,{type:"password",ref:a,placeholder:"Leave blank to keep the same"})),n.a.createElement(I.a,{disabled:h,className:"w-100",style:{background:"#FFD700",borderColor:"#FFD700"},type:"submit"},"Up to date")),n.a.createElement("div",{className:"w-100 text-center mt-4"},n.a.createElement(F.b,{to:"/user",style:{color:"#FFD700",border:"1px solid",borderRadius:"4px"}},"Cancel")))))}function ne(){return n.a.createElement(F.a,null,n.a.createElement(w,null,n.a.createElement(O.d,null,n.a.createElement(te,{exact:!0,path:"/",component:$}),n.a.createElement(te,{exact:!0,path:"/folder/:folderId",component:$}),n.a.createElement(te,{path:"/user",component:A}),n.a.createElement(te,{path:"/update-profile",component:re}),n.a.createElement(O.b,{path:"/signup",component:S}),n.a.createElement(O.b,{path:"/login",component:D}),n.a.createElement(O.b,{path:"/forgot-password",component:ae}))))}a(83);c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ne,null)),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.77878741.chunk.js.map